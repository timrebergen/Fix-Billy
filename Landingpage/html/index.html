<!DOCTYPE html>
<html>
<head>
    <title>Landingpage Billy v.01</title>
    <link rel="stylesheet" type="text/css" href="css/landingpage.css"/>
    <link rel="stylesheet" type="text/css" href="css/cards.css"/>
    <link rel="stylesheet" type="text/css" href="css/modal.css"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
</head>
<style>

* {
  box-sizing: content-box;
}
@media only screen and (min-width: 768px) {
    /* Voor computers: */
    .Header-1 {width: 8.33%;}
    .Header-2 {width: 16.66%;}
    .Header-3 {width: 25%;}
    .Header-4 {width: 33.33%;}
    .Header-5 {width: 41.66%;}
    .Header-6 {width: 50%;}
    .Header-7 {width: 58.33%;}
    .Header-8 {width: 66.66%;}
    .Header-9 {width: 75%;}
    .Header-10 {width: 83.33%;}
    .Header-11 {width: 91.66%;}
    .Header-12 {width: 100%;}
  }

  @media only screen and (min-width: 772px) {
    /* Voor tablets: */
    .Header-s-1 {width: 8.33%;}
    .Header-s-2 {width: 16.66%;}
    .Header-s-3 {width: 25%;}
    .Header-s-4 {width: 33.33%;}
    .Header-s-5 {width: 41.66%;}
    .Header-s-6 {width: 50%;}
    .Header-s-7 {width: 58.33%;}
    .Header-s-8 {width: 66.66%;}
    .Header-s-9 {width: 75%;}
    .Header-s-10 {width: 83.33%;}
    .Header-s-11 {width: 91.66%;}
    .Header-s-12 {width: 100%;}
  }

/* Voor mobile: */
[class*="Header"] {
  min-width: 100%;
}

</style>

<body>
<header class="Container">
    <div id="Header" class="Header-4 Header-s-6" style="height: auto;">
        <img src="css/hu_logo.png" class="Logo" id="logoHU" style="width:75px; height:55px">
        <h1 id="Title">BILLY</h1>
        <div id="Searchwrapper">
        <input
            style="font-size: 1.vw" 
            type="text" 
            name="searchBar"
            id="searchBar" 
            placeholder="Zoeken..."
            />
    </div>
        <div class="form" id="Values">
            <form>
                <label for="Niv-select">Kies je Niveau:</label>
                <select name="select" id="Niv-select">
                <option value="Beginner">Beginner</option>
                <option value="Gevorded">Gevorded</option>
                <option value="Expert">Expert</option>
                </select>
            </form>
            <form>
                <label for="Rol-select">Kies je Rol:</label>
                <select name="select" id="Rol-select">
                <option value="Front-End">Front-End</option>
                <option value="Back-End">Back-End</option>
                <option value="A.I">A.I</option>
                <option value="Product-Owner">Product-Owner</option>
                <option value="Cyber Security & Cloud">Cyber Security & Cloud</option>\
                </select>
            </form>
        </div>
        <div class="button" id="Add">
            <a href="api-pg/kenniskaartaanmaken/aanmaken.html">
                <button class="Add add-1">
                    Toevoegen
                </button>
            </a>
        </div>
    </div>
</Header>

<section id="contentMain" style="max-width: 100%; min-width: 5%;">
    <aside class="list" id="recommendedContainer">
        <h1 id="recommendedTitle">Aanbevolen</h1>
        <ul id="cardListRecommended" style="min-width: 100%; max-width: 100%; height: auto;"></ul>
    </aside>
    <aside class="list" id="uploadedContainer">
        <h1 id="uploadedTitle">Ge√ºpload</h1>
        <ul id="cardListUploaded" style="min-width: 100%; max-width: 100%; height: auto;"></ul>
    </aside>

<script id="search">
const searchBar = document.getElementById('searchBar');
let cardRecommended = [];
let cardUploaded = [];

searchBar.addEventListener('keyup', (e) => {
    const searchString = e.target.value;
    const filteredCards = cardRecommended.filter(cardRecommended => {
        return (
            cardRecommended.onderwerp.includes(searchString) ||
            cardRecommended.wat.includes(searchString)
        );
    });
    console.log(filteredCards)
    displayRecommended(filteredCards);
});

const loadCharacters = async () => {
    try {
        const res = await fetch('http://billy.hu-open-ict.nl/api-pg/product/read.php');
        cardRecommended = await res.json();
        displayRecommended(cardRecommended);
    } catch (err) {
        console.error(err);
    }
};


const displayRecommended = (Cards) => {
    const htmlString = Cards
        .map((Card) => {
            return `
            <ul class="cardListRecommended">
                <h2 name="onderwerp">${Card.onderwerp}</h2>
                <p name="wat"> ${Card.wat}</p>
                <h1 name="niveau"> ${Card.niveau}</h1>
                <img name="plaatje" src= "${Card.plaatje}" id="srcImage" width= "85px"</img>
                <button class="modalBtn">Lees meer</button>
        
                <div id="myModal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h1 id="modalH1">${Card.onderwerp}</h1>
                        <div>
                            <img name="plaatje" src= "${Card.plaatje}" id="modalImg" width= "85px">
                                <div id="modalImgSrc">${Card.plaatje}</div>
                            </img>

                        </div>
                        <div class="what">
                            <h1 class="modalTitle" id="titleWhat">Wat is het?</h1>
                            <p id="pWhat">${Card.wat}</p>
                        </div>

                        <div class="why">
                            <h1 class="modalTitle" id="titleWhy">Why?</h1>
                            <p id="pWhy">${Card.why}</p>
                        </div>

                        <div class="how">
                            <h1 class="modalTitle" id="titleHow">How?</h1>
                            <p id="pHow">${Card.how}</p>
                        </div>

                        <div id="Grid">
                            <table class="table table-striped">
                                <tr class="bg-info">
                                <th>Bronnen</th>
                                <th>Niveau</th>
                                <th>Leestijd?</th>
                                <th>Rating</th>
                                </tr>
                            <tbody id="myTable"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <form action="api-pg/kenniskaartbewerken/bewerken.html" method="post" class="inline-buttons">
                    <button name="updateButton" value="${Card.onderwerp}" id="updateButton" type="submit">
                        <img type= "image" id="editBtnImage" src="css/pen.png" height= "30">
                        </img>
                    </button>
                </form>
                <form action="api-pg/product/delete.php" method="POST" class="inline-buttons">
                    <button name="onderwerp" id="deleteButton" value="${Card.onderwerp}" type="submit" onclick="return confirm('Wil je het kenniskaartje verwijderen? Dit kan niet ongedaan worden gemaakt.')">
                        <img type= "image" id="deleteBtnImage" src="css/trash_main.png" height= "50">
                        </img>
                    </button>
                </form>
            </ul>
        `;
        })
        .join('');
        cardListRecommended.innerHTML = htmlString;
        cardListUploaded.innerHTML = htmlString;




// Get the modal
var modal = document.getElementById("myModal");

// Get the button that opens the modal
var allBtns = document.getElementsByClassName("modalBtn");

const showModal = function(){
    modal.style.display = "block";
}

for (const button of allBtns) {
    console.log(button, allBtns)
    button.addEventListener("click", showModal)
}

    // Get the <span> element that closes the modal
        var allCloseBtns = document.getElementsByClassName("close");

for (const closeBtn of allCloseBtns) {
    closeBtn.onclick = function() {
      modal.style.display = "none";
    }
}
    
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }

var span = document.getElementsByClassName("close")[0];


span.onclick = function() {
  modal.style.display = "none";
}

window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
};
loadCharacters();
</script>

<script>
    fetch('http://billy.hu-open-ict.nl/api-pg/product/read.php')
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                appendData(data);
            })
            
        function appendData(data) {
            var table = document.getElementById('myTable')
            for (var i = 0; i < data.length; i++) {
                var p = document.createElement("p"); 
            }
            

            var table = document.getElementById('myTable')

            for (var i = 0; i <data.length; i ++){
                var row = `<tr>
                        <td>${data[i].bronnen}</td>
                        <td>${data[i].niveau}</td>
                        <td>${data[i].studieduur}</td>
                        <td>${data[i].rating}</td>
                    </tr>`
                table.innerHTML += row
            }
        }
    </script>

<script>
    const deleteButton = document.createElement("button");
    deleteButton.classlist.add("deleteButton");
    mainDiv.appendChild(deleteButton);
    </script>



</section>
</body>
</html>